import{u as K,v as M,w as P,r as Q}from"./_element-plus-f5bcd71c.js";import{x,e as j,d as c,ao as D,o as L,c as O,E as s,a3 as d,a as n,a8 as V,u as o,a2 as U,ai as z,ac as A,a7 as G,n as H,aD as J,aE as W}from"./_@vue-7f267340.js";import{a2 as X,a3 as Y}from"./__vendor-340aa8e5.js";import{_ as Z,u as E,a as $,l as m,b as q,e as ee}from"../js2/app-1d3b7445.js";import"./_@element-plus-0bd66e96.js";const se=i=>(J("data-v-63c548e9"),i=i(),W(),i),oe={class:"login-container"},te={class:"title-container"},ae={class:"title text-center"},ne={class:"svg-container"},le=se(()=>n("div",{class:"show-pwd"},null,-1)),re={class:"svg-container"},ce={class:"tip-message"},ie={__name:"Login",setup(i){const{settings:b}=E(),N=X(),u=$().formRules,l=x({keyword:"panda",password:"123456"}),f=x({otherQuery:{},redirect:void 0}),B=e=>Object.keys(e).reduce((t,a)=>(a!=="redirect"&&(t[a]=e[a]),t),{});j(()=>N.query,e=>{e&&(f.redirect=e.redirect,f.otherQuery=B(e))},{immediate:!0});let p=c(!1),g=c("");const w=c(null),v=()=>{w.value.validate(e=>{p=!0,e&&S()})},F=Y(),I=E(),S=()=>{q(l).then(({data:e})=>{ee(m("login_success")),I.setToken(e==null?void 0:e.jwtToken),F.push("/")}).catch(e=>{g=e==null?void 0:e.msg}).finally(()=>{p=!1})},r=c("password"),y=c(null),T=()=>{r.value==="password"?r.value="":r.value="password",H(()=>{y.value.focus()})};return(e,t)=>{const a=D("svg-icon"),h=K,k=M,C=Q,R=P;return L(),O("div",oe,[s(R,{ref_key:"refLoginForm",ref:w,class:"login-form",model:l,rules:o(u)},{default:d(()=>[n("div",te,[n("h3",ae,V(o(b).title),1)]),s(k,{prop:"keyword",rules:o(u).isNotNull(o(m)("username_validate"))},{default:d(()=>[n("span",ne,[s(a,{"icon-class":"user"})]),s(h,{modelValue:l.keyword,"onUpdate:modelValue":t[0]||(t[0]=_=>l.keyword=_),placeholder:"username(admin)"},null,8,["modelValue"]),le]),_:1},8,["rules"]),s(k,{prop:"password",rules:o(u).isNotNull(o(m)("username_validate"))},{default:d(()=>[n("span",re,[s(a,{"icon-class":"password"})]),(L(),U(h,{key:r.value,ref_key:"refPassword",ref:y,modelValue:l.password,"onUpdate:modelValue":t[1]||(t[1]=_=>l.password=_),type:r.value,name:"password",placeholder:"password(123456)",onKeyup:z(v,["enter"])},null,8,["modelValue","type","onKeyup"])),n("span",{class:"show-pwd",onClick:T},[s(a,{"icon-class":r.value==="password"?"eye":"eye-open"},null,8,["icon-class"])])]),_:1},8,["rules"]),n("div",ce,V(o(g)),1),s(C,{loading:o(p),type:"primary",class:"login-btn",size:"default",onClick:A(v,["prevent"])},{default:d(()=>[G(" Login ")]),_:1},8,["loading","onClick"])]),_:1},8,["model","rules"])])}}},fe=Z(ie,[["__scopeId","data-v-63c548e9"]]);export{fe as default};
//# sourceMappingURL=Login-84d02c30.js.map
