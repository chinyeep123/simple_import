import{d as _e,e as ge,f as ve,g as be,h as ke,j as we,k as ye,l as Ce,m as xe,n as Se}from"./_element-plus-37671e98.js";import{a9 as B,ac as re,a7 as ae,a8 as Z,ad as se,ae as Ve}from"./__vendor-1966d9c6.js";import{z as E,x as de,y as ue,ao as N,o as t,c as v,E as y,a4 as _,a3 as p,u as a,a8 as C,L as V,a as P,aa as me,$ as z,D as Te,i as he,Y as $e,j as ee,_ as Pe,al as Ie,at as De,a6 as Q,r as fe,F as M,a7 as U,aj as Ee,ah as W,w as X,aC as ce,ax as Le,ac as j,n as pe,aD as Me,aE as Be,h as Ae,a5 as Re,a9 as Ne,a0 as ze}from"./_@vue-37f9eba6.js";import{u as D,s as te,l as S,c as He,e as Oe,r as je,a as ie}from"../js2/app-fee0c45d.js";import{Q as We,R as qe,d as Ge}from"./_@element-plus-51f61cc2.js";const Fe={key:1,class:"sidebar-title"},Ye={class:"sidebar-title"},Ke=E({__name:"Logo",props:{collapse:{type:Boolean,required:!0}},setup(o){const{settings:c}=D(),s=de({title:c.title,logo:"sidebar-logo"}),{title:e,logo:l}=ue(s);return(i,m)=>{const n=N("router-link");return t(),v("div",{class:z(["sidebar-logo-container",{collapse:o.collapse}])},[y(me,{name:"sidebar-logo-fade"},{default:_(()=>[o.collapse?(t(),p(n,{key:0,class:"sidebar-logo-link",to:"/"},{default:_(()=>[a(l)?(t(),p(te,{key:0,"icon-class":a(l),class:"sidebar-logo"},null,8,["icon-class"])):(t(),v("h1",Fe,C(a(e)),1))]),_:1})):(t(),p(n,{key:1,class:"sidebar-logo-link",to:"/"},{default:_(()=>[a(l)?(t(),p(te,{key:0,"icon-class":a(l),class:"sidebar-logo"},null,8,["icon-class"])):V("",!0),P("h1",Ye,C(a(e)),1)]),_:1}))]),_:1})],2)}}});function J(o){return/^(https?:|mailto:|tel:)/.test(o)}function Qe(){const{body:o}=document,c=992,s=D(),e=()=>o.getBoundingClientRect().width-1<c,l=async()=>{document.hidden||(e()?s.setSidebarOpen(!1):s.setSidebarOpen(!0),s.toggleDevice(e()?"mobile":"desktop"))};Te(()=>{window.addEventListener("resize",l)}),he(()=>{e()?(s.toggleDevice("mobile"),s.setSidebarOpen(!1),s.closeSideBar({withoutAnmination:!0}),console.log("success",s.device)):s.setSidebarOpen(!0)}),$e(()=>{window.removeEventListener("resize",l)})}const Ue=E({__name:"Link",props:{to:{type:String,required:!0}},setup(o){const c=o,s=ee(()=>J(c.to)?"a":"router-link"),e=l=>J(c.to)?{href:l,target:"_blank",rel:"noopener"}:{to:l};return(l,i)=>(t(),p(Q(s.value),Ie(De(e(o.to))),{default:_(()=>[Pe(l.$slots,"default")]),_:3},16))}}),Xe=E({__name:"MenuIcon",props:{meta:{type:Object,default:null}},setup(o){return(c,s)=>{var i,m,n;const e=_e,l=N("svg-icon");return(i=o.meta)!=null&&i.elSvgIcon?(t(),p(e,{key:0,class:"el-svg-icon"},{default:_(()=>[(t(),p(Q(We[o.meta.elSvgIcon])))]),_:1})):(m=o.meta)!=null&&m.icon?(t(),p(l,{key:1,"icon-class":(n=o.meta)==null?void 0:n.icon,class:"nav-icon"},null,8,["icon-class"])):V("",!0)}}}),le=B(Xe,[["__scopeId","data-v-9ee06859"]]),Je=E({__name:"SidebarItem",props:{item:{type:Object,required:!0},isNest:{type:Boolean,default:!1},basePath:{type:String,default:""}},setup(o){const c=o,s=fe(),e=(i=[],m)=>{const n=i.filter(r=>!r.hidden);return n.length===1&&!(m!=null&&m.alwaysShow)?(s.value=n[0],!0):n.length===0?(s.value={...m,path:"",noChildren:!0},!0):!1},l=i=>J(i)?i:J(c.basePath)?c.basePath:re.resolve(c.basePath,i);return(i,m)=>{const n=ge,r=N("SidebarItem",!0),b=ve;return o.item.hidden?V("",!0):(t(),v(M,{key:0},[e(o.item.children,o.item)?(t(),v(M,{key:0},[s.value.meta?(t(),p(Ue,{key:0,to:l(s.value.path)},{default:_(()=>[y(n,{index:l(s.value.path),class:z({"submenu-title-noDropdown":!o.isNest})},{title:_(()=>{var u;return[U(C(a(S)((u=s.value.meta)==null?void 0:u.title)),1)]}),default:_(()=>[y(le,{meta:s.value.meta||o.item.meta},null,8,["meta"])]),_:1},8,["index","class"])]),_:1},8,["to"])):V("",!0)],64)):(t(),p(b,{key:1,index:l(o.item.path)},Ee({default:_(()=>[(t(!0),v(M,null,W(o.item.children,u=>(t(),p(r,{key:u.path,"is-nest":!0,item:u,"base-path":l(u.path)},null,8,["item","base-path"]))),128))]),_:2},[o.item.meta?{name:"title",fn:_(()=>[y(le,{meta:o.item.meta},null,8,["meta"]),P("span",null,C(a(S)(o.item.meta.title)),1)]),key:"0"}:void 0]),1032,["index"]))],64))}}}),Ze={id:"Sidebar",class:"reset-menu-style"},et=E({__name:"index",setup(o){const{settings:c,allRoutes:s,sidebar:e}=ae(D()),l=Z(),i=ee(()=>{const{meta:m,path:n}=l;return m.activeMenu?m.activeMenu:n});return(m,n)=>{const r=be,b=ke;return t(),v("div",Ze,[a(c).sidebarLogo?(t(),p(Ke,{key:0,collapse:!a(e).opened},null,8,["collapse"])):V("",!0),y(b,null,{default:_(()=>[y(r,{class:"el-menu-vertical",collapse:!a(e).opened,"default-active":i.value,"collapse-transition":!1,mode:"vertical"},{default:_(()=>[(t(!0),v(M,null,W(a(s),u=>(t(),p(Je,{key:u.path,item:u,"base-path":u.path},null,8,["item","base-path"]))),128))]),_:1},8,["collapse","default-active"])]),_:1})])}}}),tt={__name:"index",setup(o){const{settings:c,cachedViews:s}=ae(D()),e=Z(),l=ee(()=>e.path);let i={},m=[],n=null;const r=D(),b=u=>{var k;(k=u.children)==null||k.forEach(d=>{r.delCacheViewDeep(d.name)})};return X(()=>e.name,()=>{var k,d,w,I,$,A,H,q,G,O,F,Y,K;const u=e.matched.length;if(m.length&&(m.includes(e.name)||m.forEach(T=>{r.delCachedView(T)})),(k=e.meta)!=null&&k.cacheGroup&&(m=((d=e.meta)==null?void 0:d.cacheGroup)||[],m.forEach(T=>{r.addCachedView(T)})),u===2&&(n!=null&&n.name?((w=n.meta)==null?void 0:w.leaveRmCachePage)&&((I=n.meta)==null?void 0:I.cachePage)&&(r.delCachedView(n.name),b(n)):i!=null&&i.name&&(($=i.meta)==null?void 0:$.leaveRmCachePage)&&((A=i.meta)==null?void 0:A.cachePage)&&r.delCachedView(i.name),e.name&&(H=e.meta)!=null&&H.cachePage&&r.addCachedView(e.name),n=null),u===3){const T=e.matched[1];(n==null?void 0:n.name)&&n.name!==T.name?((q=n.meta)==null?void 0:q.leaveRmCachePage)&&((G=n.meta)==null?void 0:G.cachePage)&&(r.delCachedView(n.name),b(n)):i!=null&&i.name&&((O=i.meta)==null?void 0:O.leaveRmCachePage)&&((F=i.meta)==null?void 0:F.cachePage)&&r.delCacheViewDeep(i.name),T.name&&((Y=T.meta)==null?void 0:Y.cachePage)&&(n=T,r.addCachedView(n.name),e.name&&(K=e.meta)!=null&&K.cachePage&&r.addCachedViewDeep(e.name))}i=He({name:e.name,meta:e.meta})},{immediate:!0}),(u,k)=>{const d=N("router-view");return t(),v("div",{class:z(["app-main",{"show-tag-view":a(c).showTagsView}])},[y(d,null,{default:_(({Component:w})=>[a(c).mainNeedAnimation?(t(),p(me,{key:0,name:"fade-transform",mode:"out-in"},{default:_(()=>[(t(),p(ce,{include:a(s)},[(t(),p(Q(w),{key:l.value}))],1032,["include"]))]),_:2},1024)):(t(),p(ce,{key:1,include:a(s)},[(t(),p(Q(w),{key:l.value}))],1032,["include"]))]),_:1})],2)}}},at=B(tt,[["__scopeId","data-v-e27d6401"]]),st={key:0,class:"no-redirect"},nt=["onClick"],ot={key:0,class:"no-redirect"},ct=["onClick"],it=E({__name:"Breadcrumb",setup(o){const c=fe(),{settings:s}=D(),e=Z(),l=()=>{var u,k;let r=e.matched.filter(d=>{var w;return(w=d.meta)==null?void 0:w.title});((k=(u=r[0])==null?void 0:u.name)==null?void 0:k.toLocaleLowerCase())==="Dashboard".toLocaleLowerCase()||(r=[{path:"/dashboard",meta:{title:S("dashboard")}}].concat(r)),c.value=r.filter(d=>d.meta&&d.meta.title&&d.meta.breadcrumb!==!1)},i=r=>{const{params:b}=e;return Ve(r)(b)},m=se(),n=r=>{const{redirect:b,path:u}=r;if(b){m.push(b);return}u&&m.push(i(u))};return X(()=>e.path,()=>l(),{immediate:!0}),(r,b)=>{const u=we,k=ye;return t(),p(k,{class:"app-breadcrumb",separator:"/"},{default:_(()=>[a(s).mainNeedAnimation?(t(),p(Le,{key:0,name:"breadcrumb"},{default:_(()=>[(t(!0),v(M,null,W(c.value,(d,w)=>(t(),p(u,{key:d.path},{default:_(()=>{var I,$;return[d.redirect==="noRedirect"||w===c.value.length-1?(t(),v("span",st,C(a(S)((I=d.meta)==null?void 0:I.title)),1)):(t(),v("a",{key:1,onClick:j(A=>n(d),["prevent"])},C(a(S)(($=d.meta)==null?void 0:$.title)),9,nt))]}),_:2},1024))),128))]),_:1})):(t(!0),v(M,{key:1},W(c.value,(d,w)=>(t(),p(u,{key:d.path},{default:_(()=>{var I,$;return[d.redirect==="noRedirect"||w===c.value.length-1?(t(),v("span",ot,C(a(S)((I=d.meta)==null?void 0:I.title)),1)):(t(),v("a",{key:1,onClick:j(A=>n(d),["prevent"])},C(a(S)(($=d.meta)==null?void 0:$.title)),9,ct))]}),_:2},1024))),128))]),_:1})}}}),lt=B(it,[["__scopeId","data-v-a53e4aba"]]),rt=E({__name:"Hamburger",props:{isActive:{type:Boolean,default:!1}},emits:["toggleClick"],setup(o,{emit:c}){const s=()=>{c("toggleClick")};return(e,l)=>(t(),v("div",{style:{padding:"0 12px"},onClick:s},[y(te,{"icon-class":"hamburger",class:z([{"is-active":o.isActive},"hamburger-style"])},null,8,["class"])]))}}),dt=B(rt,[["__scopeId","data-v-3daa7dea"]]),ut=o=>(Me("data-v-5e4c8642"),o=o(),Be(),o),mt={class:"navbar rowBC reset-el-dropdown"},ht={class:"rowSC"},ft={key:0,class:"heardCenterTitle"},pt={key:1,class:"right-menu rowSC"},_t={class:"avatar-wrapper"},gt=ut(()=>P("img",{src:"https://github.jzfai.top/file/images/nav-right-logo.gif",class:"user-avatar"},null,-1)),vt=E({__name:"Navbar",setup(o){const c=D(),{settings:s,sidebar:e,setToggleSideBar:l}=c,i=()=>{l()},m=se(),n=()=>{Oe(S("logout_success")),m.push("/login?redirect=/"),pe(()=>{je()})};return(r,b)=>{const u=Ce,k=N("router-link"),d=xe,w=Se;return t(),v("div",mt,[P("div",ht,[a(s).showHamburger?(t(),p(dt,{key:0,"is-active":a(e).opened,class:"hamburger-container",onToggleClick:i},null,8,["is-active"])):V("",!0),y(lt,{class:"breadcrumb-container"})]),a(s).showNavbarTitle?(t(),v("div",ft,C(a(s).title),1)):V("",!0),a(s).ShowDropDown?(t(),v("div",pt,[y(w,{trigger:"click",size:"medium"},{dropdown:_(()=>[y(d,null,{default:_(()=>[y(k,{to:"/"},{default:_(()=>[y(u,null,{default:_(()=>[U(C(a(S)("Home")),1)]),_:1})]),_:1}),y(u,{divided:"",onClick:n},{default:_(()=>[U(C(a(S)("logout")),1)]),_:1})]),_:1})]),default:_(()=>[P("div",_t,[gt,y(a(qe),{style:{width:"1em",height:"1em","margin-left":"4px"}})])]),_:1})])):V("",!0)])}}}),bt=B(vt,[["__scopeId","data-v-5e4c8642"]]),kt={id:"tags-view-container",class:"tags-view-container"},wt={class:"tags-view-wrapper"},yt=["onMouseup","onContextmenu","onClick"],Ct=E({__name:"TagsView",setup(o){var ne;const c=Z(),s=se(),e=de({visible:!1,top:0,left:0,selectedTag:{},affixTags:[]}),{visitedViews:l}=ae(ie());X(()=>c.path,()=>{k()}),X(()=>e.visible,h=>{h?document.body.addEventListener("click",H):document.body.removeEventListener("click",H)}),he(()=>{u(),k()});const i=h=>c.path===h.path,m=h=>h.meta&&h.meta.affix,n=(h,g="/")=>{let x=[];return h.forEach(f=>{if(f.meta&&f.meta.affix){const L=re.resolve(g,f.path);x.push({fullPath:L,path:L,name:f.name,meta:{...f.meta}})}if(f.children){const L=n(f.children,f.path);L.length>=1&&(x=[...x,...L])}}),x},r=ie(),{allRoutes:b}=D(),u=()=>{const h=e.affixTags=n(b);for(const g of h)g.name&&r.addVisitedView(g)},k=()=>(c!=null&&c.name&&r.addVisitedView(c),!1),d=(ne=Ae())==null?void 0:ne.proxy,w=(h,g)=>{const f=d==null?void 0:d.$el.getBoundingClientRect().left,R=(d==null?void 0:d.$el.offsetWidth)-105,oe=g.clientX-f+15;oe>R?e.left=R:e.left=oe,e.top=g.clientY,e.visible=!0,e.selectedTag=h},I=D(),$=h=>{r.delVisitedView(h).then(g=>{var x;if(i(h)&&O(g,h),(x=h.meta)!=null&&x.closeTabRmCache){const f=h.matched.length;f===2&&I.delCachedView(h.name),f===3&&I.setCacheViewDeep(h.name)}})},A=h=>{const{fullPath:g}=h;pe(()=>{s.replace({path:`/redirect${g}`})})},H=()=>{e.visible=!1},q=()=>{s.push(e.selectedTag),r.delOthersVisitedViews(e.selectedTag)},G=h=>{r.delAllVisitedViews().then(g=>{e.affixTags.some(x=>x.path===h.path)||O(g,h)})},O=(h,g)=>{const x=h.at(-1);x?s.push(x.fullPath):g.name==="Dashboard"?s.replace({path:`/redirect${g.fullPath}`}):s.push("/")},{visible:F,top:Y,left:K,selectedTag:T}=ue(e);return(h,g)=>{const x=N("router-link");return t(),v("div",kt,[P("div",wt,[(t(!0),v(M,null,W(a(l),f=>(t(),p(x,{ref_for:!0,ref:"refTag",key:f.path,to:{path:f.path,query:f.query,fullPath:f.fullPath},custom:""},{default:_(({navigate:L})=>[P("div",{class:z(["tags-view-item",i(f)?"active":""]),onMouseup:j(R=>m(f)?"":$(f),["middle"]),onContextmenu:j(R=>w(f,R),["prevent"]),onClick:L},[U(C(a(S)(f.title))+" ",1),m(f)?V("",!0):(t(),p(a(Ge),{key:0,class:"el-icon-close",onClick:j(R=>$(f),["prevent","stop"])},null,8,["onClick"]))],42,yt)]),_:2},1032,["to"]))),128))]),Re(P("ul",{style:ze({left:a(K)+"px",top:a(Y)+"px"}),class:"contextmenu"},[P("li",{onClick:g[0]||(g[0]=f=>A(a(T)))},C(a(S)("Refresh")),1),m(a(T))?V("",!0):(t(),v("li",{key:0,onClick:g[1]||(g[1]=f=>$(a(T)))},C(a(S)("Close")),1)),P("li",{onClick:q},C(a(S)("Close Others")),1),P("li",{onClick:g[2]||(g[2]=f=>G(a(T)))},C(a(S)("Close All")),1)],4),[[Ne,a(F)]])])}}}),xt=B(Ct,[["__scopeId","data-v-c48a9ba5"]]),St={key:0,class:"drawer-bg"},Vt={class:"main-container"},Tt=E({__name:"index",setup(o){const{device:c,sidebar:s,settings:e}=D();Qe();const l=ee(()=>({closeSidebar:!s.opened,hideSidebar:!e.showLeftMenu,withoutAnimation:s.withoutAnimation,mobile:c=="mobile"}));return(i,m)=>(t(),v("div",{class:z([l.value,"layout-wrapper"])},[a(c)=="mobile"&&a(s).opened?(t(),v("div",St)):V("",!0),a(e).showLeftMenu?(t(),p(et,{key:1,class:"sidebar-container"})):V("",!0),P("div",Vt,[a(e).showTopNavbar?(t(),p(bt,{key:0})):V("",!0),a(e).showTagsView?(t(),p(xt,{key:1})):V("",!0),y(at)])],2))}}),Lt=B(Tt,[["__scopeId","data-v-c0249850"]]);export{Lt as default};
//# sourceMappingURL=index-a34167b8.js.map
